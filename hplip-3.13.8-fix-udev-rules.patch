--- hplip-3.13.8/data/rules/56-hpmud.rules	2013-09-07 12:18:09.647214368 +0000
+++ hplip-3.13.8/data/rules/56-hpmud.rules.tpg	2013-09-07 14:08:50.056674772 +0000
@@ -1,18 +1,15 @@
 # HPLIP udev rules file. Notify console user if plugin support is required for this device.
 
 ACTION="remove", GOTO="hpmud_rules_end"
-SUBSYSTEM=="ppdev", OWNER="root", GROUP="lp", MODE="0660"
 SUBSYSTEM=="usb", ENV{DEVTYPE}=="usb_device", GOTO="hpmud_usb_rules"
-
+SUBSYSTEM=="ppdev", OWNER="root", GROUP="lp", MODE="0664"
+SUBSYSTEM!="usb", GOTO="hpmud_rules_end"
+ENV{DEVTYPE}!="usb_device", GOTO="hpmud_rules_end"
 
 LABEL="hpmud_usb_rules"
 
 # ENV{ID_HPLIP}="1" is for Ubuntu udev-acl
-ATTR{idVendor}=="03f0", ATTR{idProduct}=="????", OWNER="root", GROUP="lp", MODE="0660", ENV{sane_hpaio}="yes", ENV{libsane_matched}="yes", ENV{hp_test}="yes", ENV{ID_HPLIP}="1"
-
-
-# This rule will add the printer and install plugin
-ENV{hp_test}=="yes", PROGRAM="/bin/sh -c 'logger -p user.info loading HP Device $env{BUSNUM} $env{DEVNUM}'", RUN+="/bin/sh -c 'if [ -f /usr/bin/systemctl ]; then /usr/bin/systemctl --no-block start hplip-printer@$env{BUSNUM}:$env{DEVNUM}.service; else /usr/bin/nohup /usr/bin/hp-config_usb_printer $env{BUSNUM}:$env{DEVNUM} ; fi'"
+ATTR{idVendor}=="03f0", ATTR{idProduct}=="????", OWNER="root", GROUP="lp", MODE="0664", ENV{sane_hpaio}="yes", ENV{libsane_matched}="yes", ENV{hp_test}="yes", ENV{ID_HPLIP}="1"
 
 # If sane-bankends is installed add hpaio backend support to dll.conf if needed.
 ENV{sane_hpaio}=="yes", RUN+="/bin/sh -c 'grep -q ^#hpaio /etc/sane.d/dll.conf;if [ $$? -eq 0 ];then sed -i -e s/^#hpaio/hpaio/ /etc/sane.d/dll.conf;else grep -q ^hpaio /etc/sane.d/dll.conf;if [ $$? -ne 0 ];then echo hpaio >>/etc/sane.d/dll.conf;fi;fi'"
--- hplip-3.13.8/data/rules/56-hpmud_sysfs.rules	2013-09-07 12:18:09.647214368 +0000
+++ hplip-3.13.8/data/rules/56-hpmud_sysfs.rules.tpg	2013-09-07 14:10:49.284957870 +0000
@@ -1,21 +1,15 @@
 # HPLIP udev rules file. Notify console user if plugin support is required for this device.
 
 ACTION="remove", GOTO="hpmud_rules_end"
-SUBSYSTEM=="ppdev", OWNER="root", GROUP="lp", MODE="0660"
 SUBSYSTEM=="usb", ENV{DEVTYPE}=="usb_device", GOTO="hpmud_usb_rules"
-
+SUBSYSTEM=="ppdev", OWNER="root", GROUP="lp", MODE="0664"
+SUBSYSTEM!="usb", GOTO="hpmud_rules_end"
+ENV{DEVTYPE}!="usb_device", GOTO="hpmud_rules_end"
 
 LABEL="hpmud_usb_rules"
 
 # ENV{ID_HPLIP}="1" is for Ubuntu udev-acl
-SYSFS{idVendor}=="03f0", SYSFS{idProduct}=="????", OWNER="root", GROUP="lp", MODE="0660", ENV{sane_hpaio}="yes", ENV{libsane_matched}="yes", ENV{hp_test}="yes", ENV{ID_HPLIP}="1"
-
-
-# This rule will add the printer and install plugin
-ENV{hp_test}=="yes", PROGRAM="/bin/sh -c 'logger -p user.info loading HP Device $env{BUSNUM} $env{DEVNUM}'", RUN+="/bin/sh -c 'if [ -f /usr/bin/systemctl ]; then /usr/bin/systemctl --no-block start hplip-printer@$env{BUSNUM}:$env{DEVNUM}.service; else /usr/bin/nohup /usr/bin/python /usr/bin/hp-config_usb_printer $env{BUSNUM}:$env{DEVNUM} ; fi'"
-
-# For RHEL 5, centos 5..
-ENV{hp_test}=="yes", PROGRAM="/bin/sh -c 'X=%k; X=$${X#usbdev}; B=$${X%%%%.*}; D=$${X#*.}; logger -p user.info loading HP Device $$B $$D; printf %%03i:%%03i $$B $$D'", RUN+="/bin/sh -c '/usr/bin/python hp-config_usb_printer %c &'"
+SYSFS{idVendor}=="03f0", SYSFS{idProduct}=="????", OWNER="root", GROUP="lp", MODE="0664", ENV{sane_hpaio}="yes", ENV{libsane_matched}="yes", ENV{hp_test}="yes", ENV{ID_HPLIP}="1"
 
 
 # If sane-bankends is installed add hpaio backend support to dll.conf if needed.
